!function(t){"use strict";t(document).ready(function(){function e(e,n){var a=t("#post_ID").val(),i=t("#product-type").val(),c=new Object;t.each(t(".woocommerce_variation h3"),function(){var e=t(this).find("[name^='attribute_']"),n=[],a=t(this).find(".remove_variation").first().attr("rel");t.each(e,function(){n.push(t(this).val())}),c[a]=n}),t.post(ajax_object.ajax_url,{action:n,product_id:a,post_type:i,variations:c},function(n){t(e).html(n)})}function n(){t(".wpc-color").each(function(e,n){var a=t(this),i=a.val();a.css("background-color",i),t(this).ColorPicker({color:i,onShow:function(e){return t(e).fadeIn(500),!1},onChange:function(t,e,n){a.css("background-color","#"+e),a.val("#"+e)}})})}t(".edit-php.post-type-wpc-template .wrap h2 .add-new-h2").show(),t(document).on("click",".wpc_img_upload",function(e){e.preventDefault();var n=t(this).attr("data-selector"),a=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:!1}).on("select",function(){var e=a.state().get("selection");e.map(function(e){e=e.toJSON(),t("#"+n).attr("value",e.id),t("#"+n+"_preview").html("<img src='"+e.url+"'>")})}).open()}),t(document).on("click","#wpc-add-clipart",function(e){e.preventDefault();var n=(t(this).attr("data-selector"),t(this),wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:!0}).on("select",function(){var e=n.state().get("selection");e.map(function(e){e=e.toJSON();var n="<input type='hidden' value='"+e.id+"' name='selected-cliparts[]'>";n=n+"<span class='wpc-clipart-holder'><img src='"+e.url+"'>",n+="<label>Price: <input type='text' value='0' name='wpc-cliparts-prices[]'></label>",n=n+"<a href='#' class='button wpc-remove-clipart' data-id='"+e.id+"'>Remove</a></span>",t("#cliparts-container").prepend(n)})}).open())}),t(document).on("click",".wpc-remove-clipart",function(e){e.preventDefault();var n=t(this).data("id");t('#cliparts-form > input[value="'+n+'"]').remove(),t(this).parent().remove()}),t(document).on("click",".o-add-font-file",function(e){e.preventDefault();var n=wp.media({title:"Please set the picture",button:{text:"Select picture(s)"},multiple:!1}).on("select",function(){var e=n.state().get("selection");e.map(function(e){e=e.toJSON();var n=t(".font_style_table tbody tr").length,a=t("#wpd-font-tpl").val(),i=a.replace(/{index}/g,n);t(".font_style_table tbody").prepend(i),t("#file_data_"+n).find("input[type=hidden]").val(e.id),t("#file_data_"+n).parent().find(".media-name").html(e.filename)})}).open()}),t(document).on("click",".o-remove-font-file",function(e){e.preventDefault(),t(this).parent().find("input[type=hidden]").val(""),t(this).parent().parent().find(".media-name").html(""),t(this).parent().parent().remove()}),t(document).on("click",".o-add-media",function(e){e.preventDefault();var n=t(this),a=wp.media({title:"Please set the picture",button:{text:"Select picture(s)"},multiple:!1}).on("select",function(){var t=a.state().get("selection");t.map(function(t){t=t.toJSON(),n.parent().find("input[type=hidden]").val(t.id),n.parent().find(".media-preview").html("<img src='"+t.url+"'>"),n.parent().find(".media-name").html(t.filename)})}).open()}),t(document).on("click",".o-remove-media",function(e){e.preventDefault(),t(this).parent().find(".media-preview").html(""),t(this).parent().find("input[type=hidden]").val(""),t(this).parent().find(".media-name").html("")}),t(".wpc_order_item").each(function(){var e=t(this).attr("data-item");t(this).insertBefore(t("#order_items_list .item[data-order_item_id='"+e+"'] td.name table")),t(this).insertBefore(t("#order_line_items .item[data-order_item_id='"+e+"'] td.name table"))}),t(document).on("click","#wpc-customizer button",function(t){t.preventDefault()}),t(document).on("change",".wpc-activate-part-cb",function(e){var n=t(this).is(":checked"),a=t(this).attr("data-selector"),i=a+"_preview";n?t("#"+a).attr("value",0):t("#"+a).attr("value",""),t("#"+i).html("")}),t(document).on("change",".wpc-ovni-cb",function(e){var n=t(this).is(":checked"),a=t(this).parent().find("input[type=hidden]");n?a.val(1):a.val(-1)}),t(document).on("click",".wpc_img_remove",function(e){e.preventDefault();var n=t(this).siblings(".wpc-activate-part-cb").is(":checked"),a=t(this).attr("data-selector"),i=a+"_preview";n?t("#"+a).attr("value",0):t("#"+a).attr("value",""),t("#"+i).html("")}),t('[href="#wpc_output_setting_tab_data"]').on("click",function(){e("#wpc_output_setting_tab_data","get_output_setting_tab_data_content")}),t('[href="#wpc_parts_tab_data"]').on("click",function(){e("#wpc_parts_tab_data","get_product_tab_data_content")}),t('[href="#wpc_related_products_tab_data"]').on("click",function(){var e=t("#post_ID").val();t.post(ajax_object.ajax_url,{action:"get_related_products_content",product_id:e},function(e){t("#wpc_related_products_tab_data .related-products-container").html(e)})}),t('[href="#wpc_output_setting_tab_data"], [href="#wpc_parts_tab_data"], [href="#wpc_related_products_tab_data"]').trigger("click"),t('a[href*="post-new.php?post_type=wpc-template"]').click(function(e){e.preventDefault(),t("#wpc-products-selector-modal").modal("show")}),t("#wpc-select-template").click(function(e){var n=t("input[name=template_base_pdt]:checked").val();if("undefined"==typeof n)alert("Please select a product first");else{var a=t('a[href$="post-new.php?post_type=wpc-template"]').first().attr("href");t(location).attr("href",a+"&base-product="+n)}}),t("#wpc-settings .help_tip").each(function(e,n){var a=t(n).data("tip");t(n).tooltip({title:a})}),t("#wpc-settings [name='wpc-colors-options[wpc-color-palette]']").change(function(){var e=t(this).val();"custom"==e?t("#wpd-predefined-colors-options").show():t("#wpd-predefined-colors-options").hide()}),t(document).on("keyup","#wpc-settings [name='wpc-colors-options[wpc-custom-palette][]']",function(e){var n=t(this).val();t(this).css("background-color",n)}),t("#wpc-settings #wpc-add-color").click(function(e){e.preventDefault();var a='<div><input type="text" name="wpc-colors-options[wpc-custom-palette][]" class="wpc-color"><button class="button wpc-remove-color">Remove</button></div>';t("#wpc-settings .wpc-colors").append(a),n()}),t(document).on("click","#wpc-settings .wpc-remove-color",function(e){e.preventDefault(),t(this).parent().remove()}),t(document).on("click",".wpc-add-rule",function(e){var n=t(".wpc-rules-table tr").length,a=t(this).data("group"),i=t("#wpc-rule-tpl").val(),c=i.replace(/{rule-group}/g,a),o=c.replace(/{rule-index}/g,n);t(this).parents(".wpc-rules-table").find("tbody").append(o),t(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",n+1)}),t(document).on("click",".wpc-add-group",function(e){var n=0,a=t(".wpc-rules-table").length,i=t("#wpc-first-rule-tpl").val(),c=i.replace(/{rule-group}/g,a),o=c.replace(/{rule-index}/g,n),p='<table class="wpc-rules-table widefat"><tbody>'+o+"</tbody></table>";t(".wpc-rules-table-container").append(p)}),t(document).on("click",".wpc-remove-rule",function(e){var n=t(".wpc-rules-table tr").length;t(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",n-1),t(this).parents("tr").remove()}),t(document).on("keyup",".color_field",function(e){var n=t(this).val();t(this).css("background-color",n)}),t(document).on("click",".add_icon",function(e){e.preventDefault();var n=t(this).data("tab"),a=t(this).data("name"),i=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:!0}).on("select",function(){var e=i.state().get("selection");e.map(function(e){e=e.toJSON();var i="<div><input type='hidden' value='"+e.id+"' name='"+n+"["+a+"]'><img src='"+e.url+"'><a href='#' class='add_icon button' title='Add Icon'>Add Icon</a></div>";i+="<div class='remove_button'><a href='#' class='button wpc-remove-icon' data-id=''>Remove</a></div>",t("#"+a+"_icon").html(i)})}).open()}),t(document).on("click",".wpc-remove-icon",function(e){e.preventDefault();t(this).data("tab");t(this).parents(".wpc_images_data").find("img").attr("src",""),t(this).parents(".wpc_images_data").find("input[type=hidden]").val("")}),n(),t(".TabbedPanels").each(function(){var e="tabbedpanels_"+t(this).attr("id"),n=t.cookie(e)?parseInt(t.cookie(e)):0;new Spry.Widget.TabbedPanels(t(this).attr("id"),{defaultTab:n-1})}),t(".TabbedPanelsTab").click(function(e){var n="tabbedpanels_"+t(this).parent().parent(".TabbedPanels").attr("id");t.cookie(n,parseInt(t(this).attr("tabindex")))}),t(document).on("click",".wpd-add-media",function(e){e.preventDefault();var n=t(this),a=wp.media({title:"Please select the background image",button:{text:"Set"},multiple:!1}).on("select",function(){var t=a.state().get("selection");t.map(function(t){t=t.toJSON(),n.parent().find("img").attr("src",t.url),n.parent().find("input[type=hidden]").val(t.id)})}).open()}),t(document).on("click",".wpd-remove-media",function(e){e.preventDefault(),t(this).parent().find("img").attr("src",""),t(this).parent().find("input[type=hidden]").val("")}),t(document).on("change",".wpc-grid.wpc-grid-pad .wpc-color",function(e){var n=t(this).val();t(this).css("background-color",n)}),t(document).on("change","#wpc-settings input[name='wpc-upload-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-settings tr:not(:first-child) label[for^='wpc-upload-options'] input[type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-settings input[name='wpc-texts-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-settings tr:not(:first-child) label[for^='wpc-texts-options'] input[type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-settings input[name='wpc-shapes-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-settings tr:not(:first-child) label[for^='wpc-shapes-options'] input[type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-settings input[name='wpc-images-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-settings tr:not(:first-child) label[for^='wpc-images-options'] input[type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-settings input[name='wpc-designs-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-settings tr:not(:first-child) label[for^='wpc-designs-options'] input[type='checkbox']").prop("checked",n)}),t(".datatable").length&&t(".datatable").DataTable({bAutoWidth:!1}),t("#wpd-check-all-products").change(function(){var e=this.checked;t("#bulk-definition-table tbody input[type=checkbox]").prop("checked",e)})})}(jQuery);