function is_json(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?!0:!1}function get_design_options(){var e={};jQuery(".ninja-forms-form-wrap").find("input[type=text], input[type=checkbox], input[type=radio], input[type=number], select, textarea, input[name=_form_id]").each(function(t){var n=jQuery(this).attr("name");if(""!=n&&"undefined"!=typeof n){var r=jQuery(this).attr("type"),a="";if("radio"==r)a=jQuery(".ninja-forms-form-wrap [name="+n+"]:checked").length?jQuery(".ninja-forms-form-wrap [name="+n+"]:checked").val():"";else if("checkbox"==r)jQuery(this).parents(".list-checkbox-wrap").length>0?(a=e.hasOwnProperty(n)?e[n]:"",a+=jQuery(this).is(":checked")?jQuery(this).val()+": checked; ":jQuery(this).val()+": unchecked; "):a=jQuery(this).is(":checked")?" checked":" unchecked";else if(jQuery.isArray(jQuery(this).val())){var i=jQuery(this).val();jQuery.each(i,function(e,t){a+=e<i.length-1?t+" | ":t})}else a=jQuery(this).val();e[n]=a}});var t={};if(jQuery(".wpd-qty").length>0){var n=jQuery(".wpd-qty").first().attr("opt_price");return"undefined"!=n&&(t.opt_price=n),t.wpc_design_opt_list=e,t}return t.wpc_design_opt_list=e,t}!function(e){"use strict";e(document).ready(function(){function t(t,n,r){var a=0,i=t.data("type");if("simple"==i?a=t.data("id"):"variable"==i&&(a=e("input[name='variation_id']").val()),!a)return void alert("Select the product options first");var o=n[a],s=t.data("id");void 0===o?(o=n[s],void 0===o?r&&alert(r):e(location).attr("href",o)):e(location).attr("href",o)}function n(t,n,r,a){if(is_json(t)){var i=e.parseJSON(t);i.success?e("#wpc-uploaded-file").html(i.message):alert(i.message)}else console.log(t);e("#user-custom-design").val("")}function r(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}if(e(document).on("touchstart click",".single-product #design-from-blank-btn",function(){var n=e(this);t(n,design_from_blank_urls,"")}),e(document).on("touchstart click",".single-product #btn-tpl",function(){var n=e(this);t(n,template_pages_urls,template_page_message)}),e(".native-uploader #user-custom-design").change(function(){var t=e(this).val().toLowerCase();""!=t&&e("#custom-upload-form").ajaxForm({success:n}).submit()}),e("#custom-upload-form.custom-uploader").length){var a=e("#custom-upload-form.custom-uploader .acd-upload-info");e("#custom-upload-form.custom-uploader").fileupload({dropZone:e("#drop"),url:ajax_object.ajax_url,add:function(t,n){var i=e('<div class="working"><div class="acd-info"></div><div class="acd-progress-bar"><div class="acd-progress"></div></div></div>');i.find(".acd-info").text(n.files[0].name).append("<i>"+r(n.files[0].size)+"</i>"),a.html(""),n.context=i.appendTo(a),i.find("input").knob(),i.find("span").click(function(){i.hasClass("working")&&o.abort(),i.fadeOut(function(){i.remove()})});var o=n.submit()},progress:function(e,t){var n=parseInt(t.loaded/t.total*100,10);t.context.find(".acd-progress").css("width",n+"%"),100==n&&t.context.removeClass("working")},fail:function(e,t){t.context.addClass("error")},done:function(e,t){n(t.result,!1,!1,!1)}})}e(".wpd-design-opt .ninja-forms-form").length>0&&(e(".cart").length>0?e(document).on("change",".ninja-forms-form .ninja-forms-field",function(){e("#wpd-design-opt-price").length<1&&e("<input>").attr({type:"hidden",id:"wpd-design-opt-price",name:"wpd-design-opt"}).appendTo(".cart");var t=e('.ninja-forms-form .calc-wrap input[type = "text"]').val(),n=get_design_options();n.opt_price=t,e("#wpd-design-opt-price").val(JSON.stringify(n)),e(".amount").length>0&&e(".amount").html(e(".wpd-design-opt").data("currency_symbol")+" "+(parseFloat(e(".wpd-design-opt").data("regular_price"))+parseFloat(t)))}):e(document).on("change",'.ninja-forms-form .calc-wrap input[type = "text"]',function(){var t=e(this).val();return e(".wpd-qty").length>0?(e(".wpd-qty").attr("opt_price",t),void e(".wpd-qty").trigger("change")):t}))})}(jQuery);