jQuery(function(e){var t,a,n,l=!0,c=e(".yith_webep_attr_chosen"),s=e("#yith-wcbep-resize-table"),r=e(".yith-wcbep-chosen"),o=e("#yith-wcbep-custom-input-categories"),h=e("#yith-wcbep-custom-input"),d=e("#yith-wcbep-custom-input-textarea"),p=e("#yith-wcbep-custom-input-textarea-button-save"),f=e("#yith-wcbep-custom-input-textarea-button-cancel"),u=e("#yith-wcbep-custom-input-date"),b=e("#yith-wcbep-custom-input-image"),v=e("#yith-wcbep-custom-input-image-button-save"),g=e("#yith-wcbep-custom-input-image-button-cancel"),w=e("#yith-wcbep-custom-input-image-button-remove"),y=e("#yith-wcbep-custom-input-gallery"),m=e("#yith-wcbep-custom-input-gallery-button-cancel"),k=e("#yith-wcbep-custom-input-gallery-button-save"),_=e("#yith-wcbep-custom-input-gallery-button-add"),x=e("#yith-wcbep-custom-input-downloadable-files"),O=e("#yith-wcbep-custom-input-downloadable-files-button-cancel"),S=e("#yith-wcbep-custom-input-downloadable-files-button-save"),j=e("#yith-wcbep-custom-input-downloadable-files-button-add"),I=e("#yith-wcbep-custom-input-downloadable-files-default-row tbody"),N=e("#yith-wcbep-custom-input-downloadable-files-table"),C=e("#yith-wcbep-message-not-editable"),R=null,F=null,J=[],T=[],P=[],q=[],D=e("#yith-wcbep-get-products"),z=e("#yith-wcbep-filter-form"),E=e("#yith-wcbep-title-filter-select"),A=e("#yith-wcbep-title-filter-value"),H=e("#yith-wcbep-sku-filter-select"),U=e("#yith-wcbep-sku-filter-value"),W=e("#yith-wcbep-categories-filter"),B=e("#yith-wcbep-brands-filter"),Q=e("#yith-wcbep-tags-filter"),X=e("#yith-wcbep-regular-price-filter-select"),Y=e("#yith-wcbep-regular-price-filter-value"),G=e("#yith-wcbep-sale-price-filter-select"),K=e("#yith-wcbep-sale-price-filter-value"),L=e("#yith-wcbep-weight-filter-select"),M=e("#yith-wcbep-weight-filter-value"),V=e("#yith-wcbep-per-page-filter"),Z=e("#yith-wcbep-show-variations-filter"),$=e("#yith-wcbep-reset-filters"),ee=e("#yith-wcbep-check-by-filters"),te=e("#yith-wcbep-table-wrap"),ie=te.find(".wp-list-table").first(),ae=e("#yith-wcbep-bulk-edit-btn"),ne=e("#yith-wcbep-bulk-editor"),le=e("#yith-wcbep-bulk-cancel"),ce=e("#yith-wcbep-bulk-apply"),se=e("#yith-wcbep-categories-bulk-select"),re=e("#yith-wcbep-categories-bulk-chosen"),oe=e(".yith-wcbep-attributes-bulk-chosen"),he=e("#yith-wcbep-tags-bulk-select"),de=e("#yith-wcbep-tags-bulk-value"),pe=e("#yith-wcbep-tags-bulk-replace"),fe=e("#yith-wcbep-save"),ue=e("#yith-wcbep-cols-settings-btn"),be=e("#yith-wcbep-columns-settings-wrapper"),ve=e("#yith-wcbep-columns-settings-select-all"),ge=e("#yith-wcbep-columns-settings-unselect-all"),we=e("#yith-wcbep-importer-wrapper"),ye=e("#yith-wcbep-importer-cancel"),me=e("#yith-wcbep-importer-save"),ke=e("#yith-wcbep-importer-upload-url"),_e=e("#yith-wcbep-importer-upload-btn"),xe=[],Oe=[],Se=e("#yith-wcbep-undo"),je=e("#yith-wcbep-redo"),Ie=e("#yith-wcbep-new"),Ne=e("#yith-wcbep-delete"),Ce=e("#yith-wcbep-export"),Re=e("#yith-wcbep-import"),Fe=(e("#yith-wcbep-imported-file"),e("#yith-wcbep-export-form")),Je=e("#yith-wcbep-export-form-btn"),Te=e("#yith-wcbep-export-ids"),Pe=e("#yith-wcbep-message"),qe=ie.width(),De=e(".yith-wcbep-close"),ze=qe*s.width()/100,Ee={message:null,overlayCSS:{background:"#000 url()",opacity:.6},ignoreIfBlocked:!0},Ae={message:null,overlayCSS:{background:"#000 url()",opacity:.6,cursor:"default"}},He=function(t,i){if(i==x){var l=N.find("tr"),c="";return N.find("tr").each(function(){var t=e(this).find("td.file_name input").val(),i=e(this).find("td.file_url input").val();c+='<input type="hidden" class="yith-wcbep-hidden-downloadable-file" data-file-name="'+t+'" data-file-url="'+i+'" />'}),l.length>0&&(c+=l.length>1?l.length+" "+ajax_object.files:l.length+" "+ajax_object.file),void t.html(c)}if(i==y){var s="";return i.find("li.image img").each(function(){s+='<img data-image-id="'+e(this).data("image-id")+'" src="'+e(this).attr("src")+'" />'}),void t.find(".yith-wcbep-table-image-gallery").html(s)}if(i!=o&&i!=a&&i!=n){if(i==d)return void t.html(i.find("textarea").val());if(i==u)return void t.html(i.find("input").val());if(i==b){var r=i.find("img").attr("src")?i.find("img").attr("src"):"",h=i.find(".yith-wcbep-hidden-image-value").val();return t.find("img").attr("src",r),void t.find(".yith-wcbep-hidden-image-value").val(h)}var p=i.find("input");if(t.hasClasses(["regular_price","sale_price","weight","height","width","length","stock_quantity","download_limit","download_expiry","menu_order"],"OR")){var f=p.val();isNaN(f)?""==f&&t.html(""):t.html(f)}else{var v=!!t.find(".yith-wcbep-editable-checkbox").length;if(v)return;t.html(p.val())}}else{var g=null!=i.find(".chosen").val()?i.find(".chosen").val():"";t.find(".yith-wcbep-select-selected").val("["+g+"]");var w=i.find("select"),m="";""!=g&&"object"!=typeof g&&(g=[g]);for(var k in g)m+=w.find("option[value="+g[k]+"]").html(),k<g.length-1&&(m+=", ");if(t.find(".yith-wcbep-select-values").html(m),i==a)if(-1==t.find(".yith-wcbep-attr-is-visible").val()||-1==t.find(".yith-wcbep-attr-is-variation").val());else{var _=i.find(".yith-wcbep-custom-input-attributes-visible").is(":checked")?"1":"0",O=i.find(".yith-wcbep-custom-input-attributes-variations").is(":checked")?"1":"0";t.find(".yith-wcbep-attr-is-visible").val(_),t.find(".yith-wcbep-attr-is-variation").val(O)}}},Ue=function(e){var i=!1;return h.is(":visible")&&(i=!0,e&&h.hide(),R&&(He(R,h),h.val(""),R=null)),o.is(":visible")&&(i=!0,e&&o.hide(),R&&(He(R,o),R=null)),d.is(":visible")&&(i=!0,e&&d.hide(),R&&(R=null)),u.is(":visible")&&(i=!0,e&&u.hide(),R&&(He(R,u),R=null)),a&&a.is(":visible")&&(i=!0,e&&a.hide(),R&&(He(R,a),R=null)),b.is(":visible")&&(i=!0,e&&b.hide(),R&&(R=null)),y.is(":visible")&&(i=!0,e&&y.hide(),R&&(R=null)),x.is(":visible")&&(i=!0,e&&x.hide(),R&&(R=null)),n&&n.is(":visible")&&(i=!0,e&&n.hide(),R&&(He(R,n),R=null)),C.is(":visible")&&e?void C.hide():void(t&&i&&(We(),t=null))},We=function(){var e=t.data("y"),i=t.data("x")+1,a=t.html(),n=!1;a!=J[e][i]?(t.addClass("yith-wcbep-table-modified-td"),n=!0):t.removeClass("yith-wcbep-table-modified-td"),et()},Be=[],Qe=function(t){var i=0;Be=[],Oe=[],ie.find("tbody#the-list > tr").each(function(){var t=e(this).children("td"),a=!1;if(t.length>0){var n=1,l=[];l.push(0),t.each(function(){var t=e(this).html();t!=J[i][n]?(e(this).addClass("yith-wcbep-table-modified-td"),a=!0,l.push(1)):(e(this).removeClass("yith-wcbep-table-modified-td"),l.push(0)),n++}),Be.push(l),a&&Oe.push(i),i++}}),t&&et()},Xe=function(){y.find(".yith-wcbep-image-gallery").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#aaa")},stop:function(e,t){t.item.removeAttr("style")},update:function(){e("#yith-wcbep-custom-input-gallery-container ul li.image").css("cursor","default")}}),y.find("span.delete").on("click",function(){e(this).closest("li.image").remove()})},Ye=function(){x.find(".delete").on("click",function(){e(this).closest("tr").remove()}),x.find(".yith-wcbep-custom-input-downloadable-files-choose-file").on("click",function(){var t=e(this).closest("tr"),i=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var e=i.state().get("selection").first(),a=e.toJSON().url;t.find("td.file_url input").val(a)})}),N.sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65})},Ge=function(){var e=ie.children("thead").find("th:visible").length,t=150*e;t=qe>t?qe:t;var i=100*t/qe;s.css({width:i+"px"}),s.trigger("resize"),ie.css({height:"auto",width:t})},Ke=function(){Ge(),$e=[],Ze=0,ie=e("#yith-wcbep-table-wrap .wp-list-table"),Le(),t=null,ie.on("click","th#cb input",function(){var t=ie.find("tbody#the-list th.check-column > input");e(this).is(":checked")?t.attr("checked",!0):t.attr("checked",!1)}),ie.on("click","td.stock_status, td.manage_stock, td.sold_individually, td.featured, td.virtual, td.downloadable, td.enable_reviews",function(){var i=e(this).find("input.yith-wcbep-editable-checkbox"),a=e(this).find("input.yith-wcbep-hidden-checkbox-value");i.is(":checked")?a.val("1"):a.val("0"),R=e(this).closest("td"),t=R,We()});extra_class.select.length>0?", "+extra_class.select:"";ie.on("change","td .yith-wcbep-editable-select",function(){var i=e(this),a=e(this).closest("td").find("input.yith-wcbep-hidden-select-value");a.val(i.val()),R=e(this).closest("td"),t=R,We()});var i=extra_class.text,l=["title","regular_price","sale_price","sku","tags","weight","height","width","length","stock_quantity","download_limit","download_expiry","menu_order","button_text","product_url","slug","up_sells","cross_sells"];l=l.concat(i),ie.on("click","td",function(i){if(i.stopPropagation(),Ue(!0),R=e(i.target),t=e(i.target).closest("td"),F=e(i.target),R.is("td")||(R=R.closest("td")),R.closest("td").find(".not_editable").length>0||R.closest("td").find(".not_editable_for_new").length>0){R.closest("td").find(".not_editable").length>0?C.html(ajax_object.not_editable_variations):R.closest("td").find(".not_editable_for_new").length>0&&C.html(ajax_object.not_editable_new_product),C.show();var c=i.pageY-55-10,s=i.pageX-107.5;return void C.offset({top:c,left:s})}if(R.hasClasses(l,"OR")){var r=h.find("input");h.width(R.width()),h.height(R.height()),h.show(),h.offset(R.offset()),r.width(R.width()),r.height(R.height()),r.val(R.html()),r.trigger("focus").select()}else if(e(i.target).closest("td").hasClasses(["categories"],"OR"))R=e(i.target).closest("td"),F=e(i.target).closest("td"),h.prop("contenteditable","false"),o.width(R.width()),o.height(R.height()),o.find(".chosen").val(e.parseJSON(R.find(".yith-wcbep-select-selected").val())),o.find(".chosen").trigger("chosen:updated"),o.show(),o.offset(R.offset()),o.find(".chosen").trigger("chosen:open");else if(R.hasClasses(["description","shortdesc","purchase_note"],"OR"))d.find("textarea").val(R.html()),d.show(),d.offset(R.offset());else if(R.hasClasses(["image"],"OR")||e(i.target).closest("td").hasClasses(["image"],"OR")){R=e(i.target).closest("td");var p=R.find("img").attr("src")?R.find("img").attr("src"):"",f=R.find(".yith-wcbep-hidden-image-value").val();b.find("img").attr("src",p),b.find(".yith-wcbep-hidden-image-value").val(f),b.show(),b.offset(R.offset())}else if(R.hasClasses(["image_gallery"],"OR")||e(i.target).closest("td").hasClasses(["image_gallery"],"OR")){R=e(i.target).closest("td");var v=R.find("img"),g='<ul class="yith-wcbep-image-gallery">';v.length>0&&v.each(function(){g+='<li class="image"><span class="delete">x</span><img data-image-id="'+e(this).data("image-id")+'" src="'+e(this).attr("src")+'"></li>'}),g+="</ul>",y.find("#yith-wcbep-custom-input-gallery-container").html(g),Xe(),y.show(),y.offset(R.offset())}else if(R.hasClasses(["downloadable_files"],"OR")||e(i.target).closest("td").hasClasses(["downloadable_files"],"OR")){R=e(i.target).closest("td"),N.html("");var w=R.find(".yith-wcbep-hidden-downloadable-file"),m=e(I.html());w.length>0&&(w.each(function(){var t=m.clone(),i=e(this);t.find("td.file_name input").val(i.data("file-name")),t.find("td.file_url input").val(i.data("file-url")),N.append(t)}),Ye()),x.show(),x.offset({top:R.offset().top,left:R.offset().left-x.width()/2})}else if(R.hasClasses(["date","sale_price_from","sale_price_to"],"OR")){var r=u.find("input");u.width(R.width()),u.height(R.height()),r.width(R.width()),r.height(R.height()),r.val(R.html()),u.show(),u.offset(R.offset()),r.datepicker({dateFormat:"yy/mm/dd"}),r.trigger("focus")}else if(R.hasClasses(extra_obj.chosen,"OR")){var k="yith-wcbep-custom-input-"+R.prop("class").split(" ")[0];n=e("#"+k),n.width(R.width()),n.height(R.height()),n.find(".chosen").val(e.parseJSON(R.find(".yith-wcbep-select-selected").val())),n.find(".chosen").trigger("chosen:updated"),n.show(),n.offset(R.offset()),n.find(".chosen").trigger("chosen:open")}else if(e(i.target).closest("td").is('[class^="attr_"]')){R=e(i.target).closest("td");var _=R.prop("class").split(" ")[0].replace("attr_","");if(a=e("#yith-wcbep-custom-input-attributes-"+_),F=e(i.target).closest("td"),a.width(R.width()),-1==R.find(".yith-wcbep-attr-is-visible").val()||-1==R.find(".yith-wcbep-attr-is-variation").val()){a.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").hide();var O=a.find(".chosen");O.prop("multiple")&&(O.chosen("destroy"),O.removeAttr("multiple").append(e("<option></option>").attr("value","").text(ajax_object.leave_empty)),O.chosen({width:"100%"})),O.val(e.parseJSON(R.find(".yith-wcbep-select-selected").val())),O.trigger("chosen:updated")}else{a.find(".yith-wcbep-custom-input-attributes-checkbox-wrap").show();var O=a.find(".chosen");O.prop("multiple")||(O.chosen("destroy"),O.attr("multiple",!0),O.find('option[value=""]').remove(),O.chosen({width:"100%"})),1==R.find(".yith-wcbep-attr-is-visible").val()?a.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!0):a.find(".yith-wcbep-custom-input-attributes-visible").prop("checked",!1),1==R.find(".yith-wcbep-attr-is-variation").val()?a.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!0):a.find(".yith-wcbep-custom-input-attributes-variations").prop("checked",!1),O.val(e.parseJSON(R.find(".yith-wcbep-select-selected").val())),O.trigger("chosen:updated")}a.show(),a.offset(R.offset())}}),et()},Le=function(){J=[],q=[];var t=0;ie.find("tbody#the-list > tr").each(function(){var i=e(this).children("td"),a=[e(this).children("th")];if(i.length>0){var n=[!1],l=0;i.each(function(){e(this).data("y",t),e(this).data("x",l),n.push(e(this).html()),a.push(e(this)),l++}),J.push(n),q.push(a)}t++}),P=nt()},Me=function(){var t=[];return ie.find("tbody#the-list > tr").each(function(){var i=e(this).children("td");if(i.length>0){var a=[!1];i.each(function(){var t=e(this).find(".yith-wcbep-select-selected"),i=e(this).find("input.yith-wcbep-hidden-checkbox-value"),n=e(this).find("input.yith-wcbep-hidden-select-value"),l=e(this).find("input.yith-wcbep-hidden-image-value"),c=e(this).find(".yith-wcbep-table-image-gallery"),s=e(this).find(".yith-wcbep-hidden-downloadable-file"),r=e(this).find(".not_editable");if(t.length>0){var o=[],h=e(this).find("input.yith-wcbep-attr-is-visible"),d=e(this).find("input.yith-wcbep-attr-is-variation");h.length>0&&d.length>0?(o.push(h.val()),o.push(d.val()),o.push(e.parseJSON(t.val())),a.push(o)):a.push(t.val())}else if(i.length>0)a.push(i.val());else if(n.length>0)a.push(n.val());else if(l.length>0)a.push(l.val());else if(c.length>0){var p=[];e(this).find("img").each(function(){p.push(e(this).data("image-id"))}),p=p.length>0?p:"",a.push(p)}else if(s.length>0){var f=[];s.each(function(){f.push([e(this).data("file-name"),e(this).data("file-url")])}),f=f.length>0?f:"",a.push(f)}else r.length>0?e(this).is(".prod_type")?a.push("variation"):a.push(r.html()):a.push(e(this).html())}),t.push(a)}}),t},Ve=function(){var t=[];return ie.find("tbody#the-list > tr").each(function(){var i=e(this).children("td.ID");i.length>0&&i.each(function(){t.push(parseInt(e(this).html()))})}),t},Ze=0,$e=[],et=function(){var t=[];return ie.find("tbody#the-list > tr").each(function(){var i=e(this).children("td");if(i.length>0){var a=[];i.each(function(){a.push(e(this).html())}),t.push(a)}}),$e[Ze-1]?$e[Ze-1].toString()!=t.toString()&&($e[Ze]=t,Ze++,$e=$e.slice(0,Ze)):($e[Ze]=t,Ze++),t},tt=function(t){var i=0;ie.find("tbody#the-list > tr").each(function(){var a=e(this).children("td");if(a.length>0){var n=0;a.each(function(){e(this).html(t[i][n]);var a=e(this).find(".yith-wcbep-editable-select"),l=e(this).find(".yith-wcbep-editable-checkbox"),c="";a.length>0?(c=e(this).find(".yith-wcbep-hidden-select-value").val(),a.val(c)):l.length>0&&(c=e(this).find(".yith-wcbep-hidden-checkbox-value").val(),l.prop("checked",1==c)),n++})}i++}),Qe()},it=function(){Ze>1&&(Ze--,tt($e[Ze-1]))},at=function(){$e[Ze]&&(tt($e[Ze]),Ze++)},nt=function(){var t=[];return ie.children("thead").children("tr").children("th").each(function(){t.push(e(this).attr("id"))}),t},lt=function(){var t=0,i=[];return ie.find("tbody#the-list > tr").each(function(){var a=e(this).find("th.check-column input:checked");a.length>0&&i.push(t),t++}),i},ct=function(){ne.find("input.is_resetable, textarea.is_resetable").each(function(){e(this).val("")}),ne.find("select.is_resetable").each(function(){e(this).hasClass("chosen")||(e(this).prop("selectedIndex",0),e(this).trigger("change"))}),ne.find("select.is_resetable").each(function(){e(this).prop("selectedIndex",0),e(this).trigger("change")}),ne.find(".yith-wcbep-image-bulk-reset").trigger("click");var t=extra_bulk.chosen;for(i in t){var a=e("#yith-wcbep-"+t[i]+"-bulk-chosen");a.chosen("destroy"),a.prop("selectedIndex",-1),a.chosen({width:"100%"})}re.chosen("destroy"),re.prop("selectedIndex",-1),re.chosen({width:"100%"}),oe.each(function(){e(this).chosen("destroy"),e(this).prop("selectedIndex",-1),e(this).chosen({width:"100%"})})},st=function(){z.find("input.is_resetable").each(function(){e(this).val("")}),z.find("select.is_resetable").each(function(){e(this).prop("selectedIndex",0)}),z.find(".chosen.is_resetable").each(function(){e(this).chosen("destroy"),e(this).prop("selectedIndex",-1),e(this).chosen({width:"95%"})})},rt=function(){if(F)for(var t in q){var i=q[t];for(var a in i)if(e(i[a])[0]==F[0]&&"undefined"!=typeof q[parseInt(t)+1])return e(q[parseInt(t)+1][a]).trigger("click"),void h.selectText()}},ot=function(){var t=[];be.find("input[type=checkbox]").each(function(){var i=e(this).data("cols-id");e(this).is(":checked")?ie.find(".column-"+i).show():(ie.find(".column-"+i).hide(),t.push(i))});var i={hidden_cols:t,action:"yith_wcbep_save_default_hidden_cols"};e.ajax({type:"POST",data:i,url:ajaxurl,success:function(e){}}),Ge()};e.fn.extend({hasClasses:function(t,i){var a=this;if("OR"==i){for(var n in t)if(e(a).hasClass(t[n]))return!0;return!1}var l=!0;for(var n in t)e(a).hasClass(t[n])||(l=!1);return l}}),e.fn.selectText=function(){var e=document,t=this[0];if(e.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(t),i.select()}else if(window.getSelection){var a=window.getSelection(),i=document.createRange();i.selectNodeContents(t),a.removeAllRanges(),a.addRange(i)}},De.on("click",function(){e(this).parent().fadeOut()}),e(".yith-wcbep-datepicker").datepicker({dateFormat:"yy/mm/dd"}),ne.draggable({stop:function(){e(this).css({height:"auto"})}}),be.draggable(),we.draggable(),ie.css({height:"auto",width:ze}),s.resizable({minHeight:20,maxHeight:20,minWidth:100,handles:"e",resize:function(){var t=qe*e(this).width()/100;ie.css({height:"auto",width:t})}}),e("#yith-wcbep-bulk-editor-container").tabs(),z.find(".chosen").chosen({width:"95%"}),r.chosen({width:"100%"}),oe.chosen({width:"100%"}),h.offset([0,0]),Ie.on("click",function(){var e='<tr class="yith-wcbep-table-new-product">';for(var t in P){var i=P[t]+" column-"+P[t],a="";switch(P[t]){case"cb":e+='<th scope="row" class="check-column"></th>';break;case"ID":a="NEW";break;case"title":a="New Product";break;case"image":a='<img src=""><input class="yith-wcbep-hidden-image-value" value="" type="hidden">';break;case"image_gallery":a='<div class="yith-wcbep-table-image-gallery"></div>';break;case"categories":a='<div class="yith-wcbep-select-values"></div> <input class="yith-wcbep-select-selected" value="[]" type="hidden">';break;case"stock_status":case"manage_stock":case"sold_individually":case"featured":case"virtual":case"downloadable":case"enable_reviews":a='<input class="yith-wcbep-editable-checkbox" type="checkbox"> <input class="yith-wcbep-hidden-checkbox-value" value="0" type="hidden">';break;case"tax_status":case"tax_class":case"allow_backorders":case"shipping_class":case"status":case"visibility":case"download_type":case"prod_type":a='<div class="not_editable_for_new"></div><input type="hidden" class="yith-wcbep-hidden-checkbox-value" value="">'}"attr_"==P[t].substring(0,5)&&(a='<div class="not_editable_for_new"></div>'),"cb"!=P[t]&&(e+='<td class="'+i+'">'+a+"</td>")}e+="</tr>",ie.find("tbody").prepend(e),ot(),Ke()}),Ne.on("click",function(t){if(t.stopPropagation(),xe=lt(),!(xe.length<1)){if("yes"!=e(this).data("confirm"))return e(this).val(ajax_object.delete_confirm_txt.replace("%s",xe.length)),e(this).data("confirm","yes"),void e(this).addClass("yith-wcbep-confirm-btn");e(this).val(ajax_object.delete_txt),e(this).data("confirm","no"),e(this).removeClass("yith-wcbep-confirm-btn"),ie.block(Ee),fe.prop("disabled",!0),ae.prop("disabled",!0);var i=Ve(),a=[];for(var n in xe){var l=i[xe[n]];a.push(l)}var c={products_to_delete:a,action:"yith_wcbep_bulk_delete_products"};e.ajax({type:"POST",data:c,url:ajaxurl,success:function(t){Pe.html("<p>"+t+"</p>");var i=e('<button type="button" class="notice-dismiss" />');i.appendTo(Pe),Pe.fadeIn(),i.on("click",function(){Pe.fadeOut()}),D.trigger("click")}})}}),Ce.on("click",function(){if(xe=lt(),!(xe.length<1)){var e=Me(),t=[];for(var i in xe)t.push(e[xe[i]]);var a=[P,t],n=JSON.stringify(a),l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),l.setAttribute("download","yith_exported_products.txt"),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}),Je.on("click",function(){if(xe=lt(),!(xe.length<1)){var e=Me(),t=[];for(var i in xe)t.push(parseInt(e[xe[i]][P.indexOf("ID")]));var a=JSON.stringify(t);Te.val(a),Fe.submit()}}),Se.on("click",function(){it()}),je.on("click",function(){at()}),p.on("click",function(){He(R,d),Ue(!0)}),f.on("click",function(){Ue(!0)}),k.on("click",function(){He(R,y),Ue(!0)}),m.on("click",function(){Ue(!0)}),_.on("click",function(){var e=wp.media({title:"Upload Image",multiple:!0}).open().on("select",function(t){var i=e.state().get("selection"),a="";i.map(function(e){var t=e.toJSON().url;a+='<li class="image"><span class="delete">x</span><img data-image-id="'+e.id+'" src="'+t+'"></li>'}),y.find("#yith-wcbep-custom-input-gallery-container ul").append(a),Xe()})}),v.on("click",function(){He(R,b),Ue(!0)}),w.on("click",function(){b.find("img").attr("src",""),b.find(".yith-wcbep-hidden-image-value").val("")}),g.on("click",function(){Ue(!0)}),b.find("img").on("click",function(t){t.preventDefault();var i=e(this),a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(e){var t=a.state().get("selection").first(),n=t.toJSON().url;i.attr("src",n),b.find(".yith-wcbep-hidden-image-value").val(t.id)})}),e("#yith-wcbep-image-bulk-choose-image").on("click",function(t){var i=e(this),a=i.closest(".yith-wcbep-bulk-form-content-col"),n=a.find("#yith-wcbep-image-bulk-preview"),l=a.find("#yith-wcbep-image-bulk-value"),c=a.find("#yith-wcbep-image-bulk-src"),s=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var i=s.state().get("selection").first(),a=i.toJSON().url,r=e("<img />").attr("src",a),o=e('<span class="yith-wcbep-image-bulk-reset dashicons dashicons-no-alt"></span>');n.html("").append(r).append(o),l.val(i.id),c.val(a)})}),e(document).on("click",".yith-wcbep-image-bulk-reset",function(){var t=e(this),i=t.closest(".yith-wcbep-bulk-form-content-col"),a=i.find("#yith-wcbep-image-bulk-preview"),n=i.find("#yith-wcbep-image-bulk-value"),l=i.find("#yith-wcbep-image-bulk-src");n.val(""),a.html(""),l.val("")}),j.on("click",function(){N.append(I.html()),Ye()}),S.on("click",function(){He(R,x),Ue(!0)}),O.on("click",function(){Ue(!0)}),ne.find("select").on("change",function(){var t=e(this);"rep"==t.val()?t.parent().find(".yith_wcbep_no_display").show():t.parent().find(".yith_wcbep_no_display").hide()}),e("#yith-wcbep-my-page-wrapper").on("click",function(){Ue(!0),be.fadeOut(),Ne.val(ajax_object.delete_txt).data("confirm","no").removeClass("yith-wcbep-confirm-btn")}),h.on("click",function(e){e.stopPropagation()}).keypress(function(e){13==e.which&&(Ue(!0),e.stopPropagation(),setTimeout(rt,0))}),D.on("click",function(){var t=[];c.each(function(){var i=e(this).val();"undefined"!=typeof i&&i&&t.push([e(this).data("taxonomy-name"),e(this).val()])});var i={f_title_select:E.val(),f_title_value:A.val(),f_sku_select:H.val(),f_sku_value:U.val(),f_categories:W.val(),f_tags:Q.val(),f_attributes:t,f_reg_price_select:X.val(),f_reg_price_value:Y.val(),f_sale_price_select:G.val(),f_sale_price_value:K.val(),f_weight_select:L.val(),f_weight_value:M.val(),f_per_page:V.val(),f_show_variations:Z[0].checked?"yes":"no"};list.update(i)}),ae.on("click",function(){Ue(!0);var t=ie.find("tbody#the-list th.check-column > input:checked"),i=[];if(t.each(function(){i.push(e(this).val())}),i.length<1)return void alert(ajax_object.no_product_selected);var a=e(window).scrollTop()+100;ne.css({top:a}),ne.fadeIn(),e("#wpwrap").block(Ae),xe=lt()}),le.on("click",function(){ne.fadeOut(),ct(),e("#wpwrap").unblock()}),ne.keypress(function(e){13==e.which&&ce.trigger("click")}),ne.find("textarea").keypress(function(e){13==e.which&&e.stopPropagation()}),ce.on("click",function(){var t=se.val(),i=null!=re.val()?re.val():"",a=[],n=[],l=he.val(),c=de.val(),s=pe.val();re.find("option").each(function(){a.push(e(this).val()),n.push(e(this).text())});for(var r in xe){var o=xe[r];if(P.indexOf("categories")>-1){var h=e(q[o][P.indexOf("categories")]),d=e.parseJSON(h.find(".yith-wcbep-select-selected").val()),p="",f=[];for(var u in d)f.push(d[u].toString());switch(d=f.slice(),t){case"new":p=i;break;case"add":p=d.slice();for(var u in i)-1==p.indexOf(i[u])&&p.push(i[u]);break;case"rem":p=d.slice();for(var u in i){var r=p.indexOf(i[u]);r>-1&&p.splice(r,1)}}var b=p;h.find(".yith-wcbep-select-selected").val("["+b+"]");var v="";for(var u in b)v+=n[a.indexOf(b[u])],u<b.length-1&&(v+=", ");h.find(".yith-wcbep-select-values").html(v)}var g=extra_bulk.chosen;for(var u in g)if(P.indexOf(g[u])>-1){var w=e(q[o][P.indexOf(g[u])]),y=e.parseJSON(w.find(".yith-wcbep-select-selected").val()),m="",k=[],_=e("#yith-wcbep-"+g[u]+"-bulk-select").val(),x=e("#yith-wcbep-"+g[u]+"-bulk-chosen"),O=x.val();for(var u in y)y[u]&&k.push(y[u].toString());switch(y=k.slice(),_){case"new":m=O;break;case"add":m=y.slice();for(var u in O)-1==m.indexOf(O[u])&&m.push(O[u]);break;case"rem":m=y.slice();for(var u in O){var r=m.indexOf(O[u]);r>-1&&m.splice(r,1)}}var b=m;w.find(".yith-wcbep-select-selected").val("["+b+"]");var v="";for(var u in b){var S=x.find("option[value="+b[u]+"]").text();v+=S,u<b.length-1&&(v+=", ")}w.find(".yith-wcbep-select-values").html(v)}if(P.indexOf("tags")>-1){var j=e(q[o][P.indexOf("tags")]),I=J[o][P.indexOf("tags")],N="";if((""!=c||"del"==l)&&j.find(".not_editable").length<1){switch(l){case"new":N=c;break;case"pre":N=c+I;break;case"app":N=I+c;break;case"rep":N=I.replace(new RegExp(c,"g"),s);break;case"del":N=""}j.html(N)}}var C=["weight","height","width","length","stock_quantity","download_limit","download_expiry","regular_price","sale_price"];for(var u in C)if(P.indexOf(C[u])>-1){var w=e(q[o][P.indexOf(C[u])]),R=parseFloat(w.html()),F="",T=e("#yith-wcbep-"+C[u]+"-bulk-select").val(),D=e("#yith-wcbep-"+C[u]+"-bulk-value").val();if((!isNaN(D)&&""!=D||"del"==T)&&w.find(".not_editable").length<1){switch(T){case"new":F=parseFloat(D);break;case"inc":R=isNaN(R)?0:R,F=R+parseFloat(D);break;case"dec":F=R-parseFloat(D);break;case"incp":F=R+R*parseFloat(D)/100;break;case"decp":F=R-R*parseFloat(D)/100;break;case"decfr":var z=e(q[o][P.indexOf("regular_price")]);R=parseFloat(z.html()),isNaN(R)||""==R||(F=R-parseFloat(D));break;case"decpfr":var z=e(q[o][P.indexOf("regular_price")]);R=parseFloat(z.html()),isNaN(R)||""==R||(F=R-R*parseFloat(D)/100);break;case"del":F=""}(0>F||isNaN(F))&&(F=0),w.html(F)}}var E=["purchase_note","description","shortdesc"];for(var u in E)if(P.indexOf(E[u])>-1){var w=e(q[o][P.indexOf(E[u])]),R=w.html(),F="",T=e("#yith-wcbep-"+E[u]+"-bulk-select").val(),D=e("#yith-wcbep-"+E[u]+"-bulk-value").val(),A=e("#yith-wcbep-"+E[u]+"-bulk-replace").val();if(""!=D&&w.find(".not_editable").length<1){switch(T){case"new":F=D;break;case"pre":F=D+R;break;case"app":F=R+D;break;case"rep":F=R.replace(new RegExp(D,"g"),A)}w.html(F)}}var H=["manage_stock","stock_status","sold_individually","featured","virtual","downloadable","enable_reviews"];for(var u in H)if(P.indexOf(H[u])>-1){var w=e(q[o][P.indexOf(H[u])]),T=e("#yith-wcbep-"+H[u]+"-bulk-select").val();if(w.find(".not_editable").length<1)switch(T){case"skip":break;case"yes":w.find(".yith-wcbep-editable-checkbox").prop("checked",!1).trigger("click");break;case"no":w.find(".yith-wcbep-editable-checkbox").prop("checked",!0).trigger("click")}}var U=["tax_status","tax_class","allow_backorders","shipping_class","status","visibility","download_type","prod_type"];U=U.concat(extra_bulk.select);for(var u in U)if(P.indexOf(U[u])>-1){var w=e(q[o][P.indexOf(U[u])]),T=e("#yith-wcbep-"+U[u]+"-bulk-select").val();"skip"!=T&&w.find(".not_editable").length<1&&w.find(".yith-wcbep-editable-select").val(T).trigger("change")}var W=["button_text","product_url","slug","up_sells","cross_sells","title","sku","sale_price_from","sale_price_to","date"];W=W.concat(extra_bulk.text);for(var u in W)if(P.indexOf(W[u])>-1){var w=e(q[o][P.indexOf(W[u])]),R=w.html(),F="",T=e("#yith-wcbep-"+W[u]+"-bulk-select").val(),D=e("#yith-wcbep-"+W[u]+"-bulk-value").val(),A=e("#yith-wcbep-"+W[u]+"-bulk-replace").val();if((""!=D||"del"==T)&&w.find(".not_editable").length<1){switch(T){case"new":F=D;break;case"pre":F=D+R;break;case"app":F=R+D;break;case"rep":F=R.replace(new RegExp(D,"g"),A);break;case"del":F=""}w.html(F)}}if(P.indexOf("image")>-1){var w=e(q[o][P.indexOf("image")]),R=w.html(),F="",T=e("#yith-wcbep-image-bulk-select").val(),D=e("#yith-wcbep-image-bulk-value").val(),A=e("#yith-wcbep-image-bulk-src").val();if((""!=D||"del"==T)&&w.find(".not_editable").length<1){switch(T){case"new":F=D;break;case"del":F="",A=""}w.find(".yith-wcbep-hidden-image-value").val(F),w.find("img").attr("src",A)}}oe.each(function(){var t=e(this);if(P.indexOf("attr_"+t.data("taxonomy-name"))>-1){var i=e(q[o][P.indexOf("attr_"+t.data("taxonomy-name"))]),a=t.parent().parent().find(".yith-wcbep-attributes-bulk-select").val(),n="",l=e.parseJSON(i.find(".yith-wcbep-select-selected").val()),c=t.val(),s=[],r=[];for(var h in l)l[h]=""+l[h];switch(t.find("option").each(function(){r.push(e(this).val()),s.push(e(this).text())}),a){case"new":n=c;break;case"add":n=l.slice();for(var h in c)-1==n.indexOf(c[h])&&n.push(c[h]);break;case"rem":n=l.slice();for(var h in c){var d=n.indexOf(c[h]);d>-1&&n.splice(d,1)}}var p=n;i.find(".yith-wcbep-attr-is-visible").val()<0&&p.length>0&&(p=[p[0]]),i.find(".yith-wcbep-select-selected").val("["+p+"]");var f="";for(var h in p)f+=s[r.indexOf(p[h])],h<p.length-1&&(f+=", ");i.find(".yith-wcbep-select-values").html(f)}})}ne.fadeOut(),ct(),Qe(!0),e("#wpwrap").unblock()}),$.on("click",function(){st()}),ee.on("click",function(){var t=[],i=[];c.each(function(i,a){var n=e(a),l=null!=n.val()?n.val():null;for(var c in l)l[c]=parseInt(l[c]);t.push([n.data("taxonomy-name"),l])}),T=Me();var a=null!=W.val()?W.val().map(parseInt):null,n=[];for(var l in Q.val()){var s=Q.find("option[value="+Q.val()[l]+"]").html();n.push(s)}for(var r in T){var o=T[r],h=!0;if(A.val().length>0){var d=o[P.indexOf("title")];switch(d.length<1&&(h=!1),E.val()){case"cont":d.indexOf(A.val())<0&&(h=!1);break;case"notcont":d.indexOf(A.val())>-1&&(h=!1);break;case"starts":0!=d.indexOf(A.val())&&(h=!1);break;case"ends":d.indexOf(A.val())!=d.length-A.val().length&&(h=!1)}}if(U.val().length>0){var p=o[P.indexOf("sku")];switch(p.length<1&&(h=!1),H.val()){case"cont":p.indexOf(U.val())<0&&(h=!1);break;case"notcont":p.indexOf(U.val())>-1&&(h=!1);break;case"starts":0!=p.indexOf(U.val())&&(h=!1);break;case"ends":p.indexOf(U.val())!=p.length-U.val().length&&(h=!1)}}if(null!=a&&a.length>0){var f=e.parseJSON(o[P.indexOf("categories")]);f.length<1&&(h=!1);for(var u in a)f.indexOf(a[u])<0&&(h=!1)}if(null!=n&&n.length>0){var b=o[P.indexOf("tags")].split(", ");b.length<1&&(h=!1);for(var u in n)b.indexOf(n[u])<0&&(h=!1)}for(var u in t)if(null!=t[u][1]&&t[u][1].length>0){var v=o[P.indexOf("attr_"+t[u][0])][2];v.length<1&&(h=!1);var g=t[u][1];
    for(var l in g)v.indexOf(g[l])<0&&(h=!1)}if(Y.val().length>0){var w=parseFloat(o[P.indexOf("regular_price")]),y=parseFloat(Y.val());switch(X.val()){case"mag":w>y||(h=!1);break;case"min":y>w||(h=!1);break;case"ug":w!=y&&(h=!1);break;case"magug":w>=y||(h=!1);break;case"minug":y>=w||(h=!1)}}if(K.val().length>0){var m=parseFloat(o[P.indexOf("sale_price")]),y=parseFloat(K.val());switch(G.val()){case"mag":m>y||(h=!1);break;case"min":y>m||(h=!1);break;case"ug":m!=y&&(h=!1);break;case"magug":m>=y||(h=!1);break;case"minug":y>=m||(h=!1)}}if(M.val().length>0){var k=parseFloat(o[P.indexOf("weight")]),_=parseFloat(M.val());switch(L.val()){case"mag":k>_||(h=!1);break;case"min":_>k||(h=!1);break;case"ug":k!=_&&(h=!1);break;case"magug":k>=_||(h=!1);break;case"minug":_>=k||(h=!1)}}var x=Z[0].checked?"yes":"no";if("no"==x){var O=e(o[P.indexOf("prod_type")]);O.is(".not_editable")&&(h=!1)}h&&i.push(parseInt(r))}var S=ie.find("tbody#the-list th.check-column > input"),j=0;S.each(function(){i.indexOf(j)>-1?e(this).attr("checked",!0):e(this).attr("checked",!1),j++})}),fe.on("click",function(){if(Qe(),Oe.length>0){ie.block(Ee),fe.prop("disabled",!0),ae.prop("disabled",!0),T=Me();var t=[],i=[];for(var a in Oe){var n=Oe[a];t.push(T[n]),i.push(Be[n])}for(var c in i){var s=i[c];for(ic in s){var r=s[ic];0==r&&2!=ic&&(t[c][ic]=null)}}var o=t.length,h=o,d=0,p=e("#yith-wcbep-percentual-container");p.html('<span class="yith-wcbep-percentual" style="width:'+d+'%;">'+d+"%</span>");var f=p.find("span.yith-wcbep-percentual");p.fadeIn();for(var u in t){var b={matrix_keys:P,matrix_modify:[t[u]],edited_matrix:[i[u]],action:"yith_wcbep_bulk_edit_products"};e.ajax({type:"POST",data:b,url:ajaxurl,success:function(e){l&&console.log(e),o--,d=parseInt(100*(h-o)/h),f.html(d+"%"),f.animate({width:d+"%"}),0>=o&&(D.trigger("click"),p.delay(1500).fadeOut())}})}}}),ue.on("click",function(t){t.stopPropagation(),Ue(!0);var i=e(window).scrollTop()+100;be.css({top:i}),be.fadeIn()}),be.on("click","input[type=checkbox]",function(e){ot()}),ve.on("click",function(){be.find("input").attr("checked",!0),be.find("input").first().attr("checked",!1).trigger("click")}),ge.on("click",function(){be.find("input").attr("checked",!1),be.find("input").first().attr("checked",!0).trigger("click")}),Re.on("click",function(e){var t=Re.offset().top+Re.outerHeight()+20,i=Re.offset().left+Re.outerWidth()/2-200;we.fadeIn("fast"),we.offset({top:t,left:i})}),ye.on("click",function(){ke.val(""),we.fadeOut("fast")}),_e.on("click",function(){var e=wp.media({title:"Choose file",multiple:!1}).open().on("select",function(){var t=e.state().get("selection").first(),i=t.toJSON().url;ke.val(i)})}),me.on("click",function(){var t=(e("#yith-wcbep-importer-form"),{file_url:ke.val(),action:"yith_wcbep_import"});e.ajax({type:"POST",data:t,url:ajaxurl,success:function(t){if(t.length>0){Pe.html("<p>"+t+"</p>");var i=e('<button type="button" class="notice-dismiss" />');i.appendTo(Pe),Pe.fadeIn(),i.on("click",function(){Pe.fadeOut()})}we.unblock(),we.fadeOut("fast"),ke.val("")}})}),list={f_data:{paged:"1",order:"desc",orderby:"ID",f_show_variations:"no"},init:function(){var t,i=500;Ke(),e(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(t){if(t.preventDefault(),!(Ze>1)){var i=this.search.substring(1),a=[];c.each(function(){a.push([e(this).data("taxonomy-name"),e(this).val()])});var n=e.extend(list.f_data,{paged:list.__query(i,"paged")||"1",order:list.__query(i,"order")||"desc",orderby:list.__query(i,"orderby")||"ID"});list.update(n)}}),e("input[name=paged]").on("change",function(a){13==a.which&&a.preventDefault();var n=e(".tablenav-pages a")[0].search.substring(1),l=e("input[name=paged]"),c=e.extend(list.f_data,{paged:parseInt(l.val())||"1",order:list.__query(n,"order")||"desc",orderby:list.__query(n,"orderby")||"ID"});window.clearTimeout(t),t=window.setTimeout(function(){list.update(c)},i)})},update:function(t){ie.block(Ee),fe.prop("disabled",!0),ae.prop("disabled",!0),list.f_data=t,B.length&&(t=e.extend({f_brands:B.val()},t)),e.ajax({url:ajaxurl,data:e.extend({_ajax_yith_wcbep_list_nonce:e("#_ajax_yith_wcbep_list_nonce").val(),action:"_ajax_fetch_yith_wcbep_list"},t),success:function(t){var i=e.parseJSON(t);i.rows.length&&e("#the-list").html(i.rows),i.column_headers.length&&e("thead tr, tfoot tr").html(i.column_headers),i.pagination.bottom.length&&e(".tablenav.top .tablenav-pages").html(e(i.pagination.top).html()),i.pagination.top.length&&e(".tablenav.bottom .tablenav-pages").html(e(i.pagination.bottom).html()),list.init(),ie.unblock(),fe.prop("disabled",!1),ae.prop("disabled",!1),Le()}})},__query:function(e,t){for(var i=e.split("&"),a=0;a<i.length;a++){var n=i[a].split("=");if(n[0]==t)return n[1]}return!1}},list.init()});