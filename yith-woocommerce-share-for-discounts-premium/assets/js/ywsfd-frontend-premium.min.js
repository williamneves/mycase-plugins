jQuery(function(a){function e(){if(""!=u){var e=a(".ywsfd-social-button.ywsfd-twitter");e.html('<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="'+ywsfd.sharing.url+"?"+u+'" data-text="'+ywsfd.sharing.message+'" data-via="'+ywsfd.sharing.twitter_username+'">Tweet</a>'),twttr.widgets.load()}}function s(){if(""!=u){var e=a(".ywsfd-social-button.ywsfd-facebook");e.html('<div class="fb-like" data-layout="button" data-action="like" data-show-faces="false" data-share="false" data-href="'+ywsfd.sharing.url+"?"+u+'"></div>'),FB.XFBML.parse()}}function t(){if(""!=u){var e=a(".ywsfd-social-button .ywsfd-facebook-share");e.attr("href","javascript:fbShare('"+ywsfd.sharing.url+"?"+u+"')")}}function i(){if(""!=u){var e=a(".ywsfd-social-button.ywsfd-google");e.html('<div class="g-plusone" data-size="medium" data-annotation="none" data-callback="gpCallback" data-href="'+ywsfd.sharing.url+"?"+u+'"></div>'),gapi.plusone.go()}}function d(){if(""!=u){var e=a(".ywsfd-social-button.ywsfd-google-share");e.html('<div class="g-plus" data-action="share" data-size="medium" data-annotation="none" data-href="'+ywsfd.sharing.url+"?"+u+'" data-onendinteraction="gpShareCallback"></div>'),gapi.plus.go()}}if("yes"==ywsfd.email){var o={body:a("body"),email_form:a(".ywsfd-email-form-wrapper"),email_submit:a("#ywsfd_email"),init:function(){this.email_submit.on("click",this.submit),this.email_form.on("blur input change",".input-text",this.validate_field)},validate_field:function(e){var s=a(this),t=s.closest(".form-row"),i=!0;if(t.is(".ywsfd-validate-required")&&""===s.val()&&(t.removeClass("ywsfd-validated").addClass("ywsfd-invalid"),i=!1),t.is(".ywsfd-validate-email")&&s.val()){var d=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);d.test(s.val())||(t.removeClass("ywsfd-validated").addClass("ywsfd-invalid"),i=!1)}i&&t.removeClass("ywsfd-invalid").addClass("ywsfd-validated")},submit:function(e){var s=a(".ywsfd-email-form-wrapper"),t=a(".ywsfd-social");if(t.is(".processing"))return!1;t.addClass("processing"),s.addClass("opened");var i=t.data();return 1!=i["blockUI.isBlocked"]&&t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.ajax({type:"POST",url:ywsfd.ajax_email_url,data:{ywsfd_wpnonce:a("#ywsfd_wpnonce").val(),ywsfd_friend_email:a("#ywsfd_friend_email").val(),ywsfd_user_email:a("#ywsfd_user_email").val(),ywsfd_message:a("#ywsfd_message").val(),ywsfd_sharing_url:a("#ywsfd_sharing_url").val(),ywsfd_post_id:a("#ywsfd_post_id").val()},success:function(e){var i="";try{if(e.indexOf("<!--WC_START-->")>=0&&(e=e.split("<!--WC_START-->")[1]),e.indexOf("<!--WC_END-->")>=0&&(e=e.split("<!--WC_END-->")[0]),i=a.parseJSON(e),"success"!==i.status)throw"failure"===i.status?"Result failure":"Invalid response";-1!=i.redirect.indexOf("https://")||-1!=i.redirect.indexOf("http://")?window.location=i.redirect:window.location=decodeURI(i.redirect)}catch(d){a(".woocommerce-error, .woocommerce-message").remove(),s.addClass("opened"),i.messages?s.prepend(i.messages):s.prepend(e),t.removeClass("processing").unblock(),s.find(".input-text, select").blur(),a("html, body").animate({scrollTop:a(".ywsfd-email-form-wrapper").offset().top-100},1e3)}},dataType:"html"}),!1}};o.init(),a(".ywsfd-email").click(function(){a(".ywsfd-email-form-wrapper").toggleClass("opened")})}if("no"==ywsfd.custom_url){var u="";a(document).ready(function(){a("body").bind("twitter_button",e),a("body").bind("facebook_button",s),a("body").bind("facebook_share",t),a("body").bind("google_button",i),a("body").bind("google_share",d)}),a(document).on("woocommerce_variation_has_changed",function(){var e=[];if(a(".variations select").each(function(){a("option:selected",this).val()&&e.push("attribute_"+a(this).attr("id")+"="+a("option:selected",this).val())}),u=e.join("&"),"yes"==ywsfd.facebook&&(a("body").trigger("facebook_button"),a("body").trigger("facebook_share")),"yes"==ywsfd.twitter&&a("body").trigger("twitter_button"),"yes"==ywsfd.google&&(a("body").trigger("google_button"),a("body").trigger("google_share")),"yes"==ywsfd.email&&""!=u){var s=a("#ywsfd_sharing_url");s.val(ywsfd.sharing.url+"?"+u)}})}});