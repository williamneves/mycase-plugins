function get_coupon(){var e=jQuery(".ywsfd-social");if(e.is(".processing"))return!1;e.addClass("processing");var t=e.data();return 1!=t["blockUI.isBlocked"]&&e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery.ajax({type:"POST",url:ywsfd.ajax_social_url,data:{post_id:ywsfd.post_id},success:function(t){var o="";try{if(t.indexOf("<!--WC_START-->")>=0&&(t=t.split("<!--WC_START-->")[1]),t.indexOf("<!--WC_END-->")>=0&&(t=t.split("<!--WC_END-->")[0]),o=jQuery.parseJSON(t),"success"!==o.status)throw"failure"===o.status?"Result failure":"Invalid response";setTimeout(function(){-1!=o.redirect.indexOf("https://")||-1!=o.redirect.indexOf("http://")?window.location=o.redirect:window.location=decodeURI(o.redirect)},1e4)}catch(r){jQuery(".woocommerce-error, .woocommerce-message").remove(),o.messages?e.prepend(o.messages):e.prepend(t),e.removeClass("processing").unblock(),jQuery("html, body").animate({scrollTop:jQuery(".ywsfd-social").offset().top-100},1e3)}},dataType:"html"}),!1}function fbShare(e){FB.ui({method:"feed",link:e,caption:"",display:"popup"},function(e){e&&e.post_id&&get_coupon()})}function onGoogleLoad(){jQuery("body").trigger("google_button"),jQuery("body").trigger("google_share")}function gpCallback(e){"on"==e.state&&get_coupon()}function gpShareCallback(e){share_timer=setInterval(function(){counter++,4==counter&&(get_coupon(),clearInterval(share_timer))},1e3)}function gpStopShareCallback(e){null!=share_timer&&(counter=0,clearInterval(share_timer))}if("yes"==ywsfd.facebook&&(window.fbAsyncInit=function(){FB.init({appId:ywsfd.fb_app_id,xfbml:!0,version:"v2.5"}),FB.Event.subscribe("edge.create",function(e,t){get_coupon()}),jQuery("body").trigger("facebook_button"),jQuery("body").trigger("facebook_share")},function(e,t,o){var r,n=e.getElementsByTagName(t)[0];e.getElementById(o)||(r=e.createElement(t),r.id=o,r.src="//connect.facebook.net/"+ywsfd.locale+"/sdk.js",n.parentNode.insertBefore(r,n))}(document,"script","facebook-jssdk")),"yes"==ywsfd.twitter&&(window.twttr=function(e,t,o){var r,n=e.getElementsByTagName(t)[0],s=window.twttr||{};return e.getElementById(o)?s:(r=e.createElement(t),r.id=o,r.src="https://platform.twitter.com/widgets.js",n.parentNode.insertBefore(r,n),s._e=[],s.ready=function(e){s._e.push(e)},s)}(document,"script","twitter-wjs"),twttr.ready(function(e){e.events.bind("tweet",function(e){get_coupon()}),jQuery("body").trigger("twitter_button")})),"yes"==ywsfd.google){var share_timer=null,counter=0;window.___gcfg={lang:ywsfd.locale.substring(0,2)},function(e,t,o){var r,n=e.getElementsByTagName(t)[0];e.getElementById(o)||(r=e.createElement(t),r.id=o,r.src="//apis.google.com/js/plusone.js?onload=onGoogleLoad",r.async=!0,n.parentNode.insertBefore(r,n))}(document,"script","google-sdk")}